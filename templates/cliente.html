<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Examen UNI FIEE</title>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_mesh/face_mesh.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/onnxruntime-web/dist/ort.min.js"></script>
    <style>
        body { font-family: sans-serif; margin: 0; display: flex; height: 100vh; overflow: hidden; background: #f0f2f5; }
        .examen { flex: 2.5; background: white; border-right: 2px solid #ddd; }
        .sidebar { flex: 1; padding: 20px; display: flex; flex-direction: column; align-items: center; background: #fff; }
        video { width: 100%; border-radius: 12px; transform: scaleX(-1); background: #000; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
        .status-badge { padding: 10px 20px; border-radius: 50px; margin-top: 15px; font-weight: bold; }
        .status-ok { background: #d1fae5; color: #10b981; }
        .status-alert { background: #fee2e2; color: #ef4444; }
        .log { width: 100%; margin-top: 20px; height: 200px; overflow-y: auto; border: 1px solid #eee; padding: 10px; font-size: 12px; }
    </style>
</head>
<body>
    <div class="examen">
        <iframe src="https://blogger.googleusercontent.com/img/b/R29vZ2xl/AVvXsEhLVm19tPx0AwLoM1jz5W4UkrN7e2gM8J23pk7kp7X0nliJ-SDQ79rd8s-fyoRZOmtO78ToP_lwaXCv_wXozQbcM08juHv5YzMAAePnVIk9BWG3hgGuCOeKidfyKMFTwOsyYHjf8FJwpWeF/s1600/FISICA-I-UNI-B.jpg" 
                style="width: 100%; height: 100%; border: none;"></iframe>
    </div>

    <div class="sidebar">
        <div style="background:#800000; color:white; width:100%; padding:10px; border-radius:8px; text-align:center; margin-bottom:15px;">
            <strong>{{ nombre }}</strong><br><small>{{ uid }} - {{ materia }}</small>
        </div>
        
        <video id="video-alumno" autoplay playsinline></video>
        <canvas id="canvas-oculto" style="display:none" width="640" height="480"></canvas>
        
        <div id="estado" class="status-badge status-ok">‚è≥ Cargando IA...</div>

        <div class="log">
            <strong>Registro de actividad:</strong>
            <div id="lista-eventos"></div>
        </div>
    </div>

    <script>const DATOS_ALUMNO = {uid: "{{uid}}", nombre: "{{nombre}}", materia: "{{materia}}"};</script>
    <script src="/static/js/motor_ia.js"></script>
</body>
</html>
